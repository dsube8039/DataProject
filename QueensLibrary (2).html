<!DOCTYPE html>
<html>
<head>
    <title>Queens Library</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4rBWLjCb2UqXieMcTnOJgSAr9e4xn_Wo"></script>

<style>
    body{
        font-size: 25px;
    }
    .info{
        background-color: lightgreen;
    }
    .time{
        font-size: 17px;
    }
</style>

<script type="text/template" id="LibraryTemplate">
	<!-- This section is to define the HTML template-->
    <div class="info">
        <div>Queens Library at {{name}}</div>
        <p class="time">
            Monday:{{mn}} <br>
            Tuesday:{{tu}} <br>
            Wednesday:{{we}} <br>
            Thursday:{{th}} <br>
            Friday:{{fr}} <br>
            Saturday:{{sa}} <br>
            Sunday:{{su}} <br>
        </p>
        <p>{{address}}, {{city}}, {{postcode}}</p>
        <button onclick="GoogMap( {{latitude}}, {{longitude}} )">Map</button>

    </div>
</script>

<script>
function loadJSON(){       	
    $.getJSON("https://data.cityofnewyork.us/resource/b67a-vkqb.json", function(result){        
        LibraryInfo(result);
    });	
}
function LibraryInfo(data){
    var build = "";
    var output = document.getElementById("op");
    var UserInput = document.getElementById("ip").value;
    var template = document.getElementById("LibraryTemplate").innerHTML;
    
    for(i=0; i<data.length; i++){        
        if (UserInput.toLowerCase().indexOf(data[i].city.toLowerCase() ) != -1){
            build += Mustache.render(template, data[i]);
        }
    }
    output.innerHTML = build;    
}

function GoogMap(Lat, Lon){
    var gMap = document.getElementById("googleMap");
    var mapProp= {
            center:new google.maps.LatLng(Lat, Lon),
            zoom:18,
        };
    var map=new google.maps.Map(gMap,mapProp);
}
</script>
</head>

<body>
    <div class="container">
            <h1>Queens Library Branches</h1> 
            <p>Enter the city of the Library:<input type="text" id="ip" value="Flushing" placeholder="Enter the city of the Library"></p>
            <button onclick="loadJSON()">Get Info</button>            
        <div id="op"></div>
    </div>
</body>

</html>